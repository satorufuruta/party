name = "party-realtime-worker"
main = "workers/index.ts"
compatibility_date = "2024-12-05"
compatibility_flags = ["nodejs_compat"]
usage_model = "bundled"

[vars]
DEFAULT_SESSION_ID = "quiz1102"

[observability]
enabled = true

[durable_objects]
bindings = [
  { name = "QUIZ_ROOM_DO", class_name = "QuizRoomDurableObject" }
]

[[migrations]]
tag = "v1"
new_classes = ["QuizRoomDurableObject"]

[[d1_databases]]
binding = "PARTY_DB"
database_name = "party-db"
database_id = "10701be3-24a8-43ef-b715-b78a20f9dcb2"

[env.dev]
vars = { AUTO_PROGRESS_DEFAULT = "true", DEFAULT_SESSION_ID = "quiz1102" }

[env.dev.durable_objects]
bindings = [
  { name = "QUIZ_ROOM_DO", class_name = "QuizRoomDurableObject" }
]

[[env.dev.d1_databases]]
binding = "PARTY_DB"
database_name = "party-db-dev"
database_id = "TODO_REPLACE_WITH_DEV_D1_ID"

[pages]
project_name = "party-pages"
build_output_dir = ".vercel/output/static"

[[pages.d1_databases]]
binding = "PARTY_DB"
database_name = "party-db"
database_id = "10701be3-24a8-43ef-b715-b78a20f9dcb2"
